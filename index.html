<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Samuel Ciscato - CV Twin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      color-scheme: light;
      --bg: #05070b;
      --bg-card: #0f172a;
      --border-subtle: #1f2937;
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --accent: #3b82f6;
      --accent-soft: rgba(59, 130, 246, 0.1);
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.55);
      --radius-lg: 16px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background:
        radial-gradient(circle at top, #0b1120 0, #020617 40%, #020617 100%);
      color: var(--text-main);
    }

    h1, h2, h3,
    .hero-title,
    .sidebar-section-title {
      font-family: "Montserrat", "Inter", system-ui, sans-serif;
    }

    .page {
      max-width: 1120px;
      margin: 32px auto 40px;
      padding: 0 20px;
      display: grid;
      grid-template-columns: 280px minmax(0, 1fr);
      grid-auto-rows: auto;
      gap: 24px;
    }

    @media (max-width: 840px) {
      .page {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    /* HERO TOP (full width) */

    .hero-card {
      background:
        radial-gradient(circle at top left, #1e293b 0, #020617 40%, #020617 100%);
      border-radius: var(--radius-lg);
      border: 1px solid #111827;
      box-shadow: var(--shadow-soft);
      padding: 18px 22px 18px;
      position: relative;
      overflow: hidden;
      grid-column: 1 / -1;
      color: #e5e7eb;
    }

    .hero-photo-watermark {
      position: absolute;
      left: -32px;
      top: 18px;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background-image: url("netlify/images/samuel-profile.jpg"); /* ta photo */
      background-size: cover;
      background-position: center;
      opacity: 0.14;
      filter: grayscale(15%);
      pointer-events: none;
      z-index: 0;
    }

    .hero-content {
      position: relative;
      z-index: 1;
    }

    .hero-top-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 16px;
      margin-bottom: 8px;
    }

    .hero-identity {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .hero-name {
      margin: 0;
      font-size: 22px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      font-weight: 600;
    }

    .role {
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #c7d2fe;
    }

    .badge-twin {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(129, 140, 248, 0.5);
      color: #e5e7ff;
      font-size: 11px;
      font-weight: 500;
      margin-top: 6px;
      align-self: flex-start;
    }

    .badge-dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: #4ade80;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.22);
    }

    .hero-lang {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      color: #c7d2fe;
    }

    .lang-switch {
      display: inline-flex;
      border-radius: 999px;
      border: 1px solid #374151;
      overflow: hidden;
      background: rgba(15, 23, 42, 0.85);
      backdrop-filter: blur(2px);
    }

    .lang-btn {
      border: none;
      background: transparent;
      padding: 4px 8px;
      font-size: 11px;
      cursor: pointer;
      color: #e5e7eb;
    }

    .lang-btn.active {
      background: #e5e7ff;
      color: #111827;
      font-weight: 500;
    }

    .hero-main-row {
      margin-top: 6px;
    }

    .hero-eyebrow {
      font-size: 11px;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: #9ca3ff;
      margin-bottom: 6px;
    }

    .hero-title {
      margin: 0 0 6px;
      font-size: 19px;
      font-weight: 600;
    }

    .hero-sub {
      margin: 0;
      font-size: 13px;
      color: #d1d5db;
      line-height: 1.6;
      max-width: 650px;
    }

    .hero-quick-questions {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .hero-quick-btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 235, 0.75);
      background: rgba(15, 23, 42, 0.85);
      font-size: 11px;
      padding: 5px 11px;
      cursor: pointer;
      color: #e5e7ff;
      transition: background 0.15s ease, border-color 0.15s ease, transform 0.08s ease;
      white-space: nowrap;
      backdrop-filter: blur(2px); /* blur léger */
    }

    .hero-quick-btn:hover {
      background: rgba(59, 130, 246, 0.9);
      border-color: #bfdbfe;
      transform: translateY(-0.5px);
    }

    /* visuel abstrait à droite (type bannière LinkedIn) */

    .hero-diagram {
      position: absolute;
      right: -70px;
      top: -40px;
      width: 320px;
      height: 220px;
      pointer-events: none;
      opacity: 0.75;
    }

    /* SIDEBAR */

    .sidebar {
      background: #020617;
      border-radius: var(--radius-lg);
      padding: 22px 22px;
      border: 1px solid var(--border-subtle);
      display: flex;
      flex-direction: column;
      gap: 20px;
      box-shadow: var(--shadow-soft);
    }

    .sidebar-section-title {
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin: 0 0 10px;
    }

    .sidebar-text {
      font-size: 13px;
      line-height: 1.55;
      color: #e5e7eb;
    }

    .sidebar-card {
      border-radius: 12px;
      border: 1px solid #111827;
      padding: 12px 12px 14px;
      background: radial-gradient(circle at top left, #020617 0, #020617 40%, #020617 100%);
    }

    /* Profil */

    /* LinkedIn card */

    .linkedin-card {
      margin-top: 4px;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 9px 10px;
      border-radius: 12px;
      border: 1px solid #1f2937;
      background: #020617;
      cursor: pointer;
      text-decoration: none;
      color: #e5e7eb;
      font-size: 12px;
    }

    .linkedin-thumb {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      background-image: url("netlify/images/linkedin-thumb.jpg"); /* miniature LinkedIn */
      background-size: cover;
      background-position: center;
      flex-shrink: 0;
    }

    .linkedin-text-main {
      font-weight: 500;
    }

    .linkedin-text-sub {
      font-size: 11px;
      color: var(--text-muted);
    }

    /* Contact */

    .sidebar-contact {
      font-size: 11px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .sidebar-contact a {
      color: inherit;
      text-decoration: none;
    }

    .sidebar-contact a:hover {
      text-decoration: underline;
    }

    /* CV block */

    #cv-title {
      display: none; /* pas de titre visible pour CV */
    }

    .cv-preview-box {
      border-radius: 10px;
      border: 1px dashed #4b5563;
      background-color: #020617;
      background-image: url("netlify/images/cv-preview.jpg"); /* miniature du CV */
      background-size: cover;
      background-position: top center;
      padding: 0;
      font-size: 12px;
      text-align: center;
      color: var(--text-muted);
      aspect-ratio: 3 / 4;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .sidebar-buttons {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 10px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 9px 12px;
      border-radius: 999px;
      border: 1px solid transparent;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      text-decoration: none;
      transition: background 0.15s ease, color 0.15s ease, border-color 0.15s ease, transform 0.08s ease;
    }

    .btn-primary {
      background: var(--accent);
      color: #ffffff;
      box-shadow: 0 10px 22px rgba(37, 99, 235, 0.5);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 26px rgba(37, 99, 235, 0.7);
    }

    .btn-ghost {
      background: #020617;
      color: #e5e7eb;
      border-color: #374151;
    }

    .btn-ghost:hover {
      background: #111827;
    }

    /* MAIN COLUMN */

    .main {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .qa-card {
      background: #020617;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-soft);
      padding: 20px 22px 22px;
    }

    .qa-header-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 16px;
      margin-bottom: 14px;
    }

    .qa-title {
      margin: 0;
      font-size: 15px;
      font-weight: 600;
    }

    .qa-caption {
      margin: 0;
      font-size: 12px;
      color: var(--text-muted);
    }

    .qa-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 6px;
    }

    .qa-row {
      display: flex;
      gap: 10px;
    }

    @media (max-width: 600px) {
      .qa-row {
        flex-direction: column;
        align-items: stretch;
      }
    }

    textarea {
      width: 100%;
      min-height: 70px;
      resize: vertical;
      padding: 10px 11px;
      border-radius: 10px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      font-family: inherit;
      font-size: 13px;
      line-height: 1.5;
      outline: none;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    textarea::placeholder {
      color: #6b7280;
    }

    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.4);
      background: #020617;
    }

    .qa-submit-btn {
      padding-inline: 18px;
      white-space: nowrap;
      height: 38px;
    }

    .status-text {
      font-size: 12px;
      color: var(--text-muted);
      min-height: 18px;
    }

    .answer-box {
      margin-top: 8px;
      padding: 12px 12px 10px;
      border-radius: 10px;
      border: 1px solid #374151;
      background: #020617;
      font-size: 13px;
      line-height: 1.55;
      white-space: pre-wrap;
      color: #e5e7eb;
    }

    .answer-empty {
      border-style: dashed;
      background: #020617;
      color: #6b7280;
    }

    .followup-container {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: flex-start;
    }

    .followup-label {
      font-size: 11px;
      color: var(--text-muted);
    }

    .followup-btn {
      font-size: 11px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: #020617;
      cursor: pointer;
      max-width: 100%;
      white-space: normal;
      line-height: 1.4;
      text-align: left;
      color: #e5e7eb;
      transition: background 0.15s ease, border-color 0.15s ease, transform 0.08s ease;
    }

    .followup-btn:hover {
      background: #111827;
      border-color: var(--accent);
      transform: translateY(-0.5px);
    }

    /* INFO CARD (bottom) */

    .info-card {
      background: #020617;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-soft);
      padding: 18px 22px 18px;
      grid-column: 1 / -1;
      font-size: 12px;
      line-height: 1.6;
    }

    .info-title {
      margin: 0 0 8px;
      font-size: 14px;
      font-weight: 600;
    }

    .footer-note {
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.6;
    }

    .footer-note strong {
      font-weight: 600;
    }
  </style>
</head>
<body>
  <main class="page">

    <!-- HERO TOP -->
    <section class="hero-card">
      <div class="hero-photo-watermark"></div>

      <div class="hero-content">
        <div class="hero-top-row">
          <div class="hero-identity">
            <h1 class="hero-name">SAMUEL CISCATO</h1>
            <div class="role" id="role-line">
              DIRECTION MARKETING ET E COMMERCE · TRANSFORMATION DIGITALE
            </div>
            <div class="badge-twin">
              <span class="badge-dot"></span>
              <span id="badge-text">Samuel CV Twin</span>
            </div>
          </div>

          <div class="hero-lang">
            <span id="lang-label">Langue</span>
            <div class="lang-switch">
              <button class="lang-btn active" data-lang="fr" id="btn-lang-fr">FR</button>
              <button class="lang-btn" data-lang="en" id="btn-lang-en">EN</button>
            </div>
          </div>
        </div>

        <div class="hero-main-row">
          <div class="hero-eyebrow" id="hero-eyebrow">DOSSIER INTERACTIF</div>
          <h2 class="hero-title" id="hero-title">
            Explorer mon parcours avant d’échanger en direct
          </h2>
          <p class="hero-sub" id="hero-sub">
            Cet outil vous permet de poser des questions à un agent IA entraîné sur mon dossier
            (CV, lettres, profil AssessFirst, questions/réponses). Il ne parle pas en mon nom :
            il lit, recoupe et synthétise les informations disponibles, puis vous propose des pistes pour creuser.
          </p>

          <div class="hero-quick-questions" id="hero-quick-questions"></div>
        </div>
      </div>

      <!-- visuel abstrait côté droit -->
      <svg class="hero-diagram" viewBox="0 0 400 260" aria-hidden="true">
        <defs>
          <linearGradient id="streak" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0" stop-color="#fbbf24" />
            <stop offset="0.35" stop-color="#7dd3fc" />
            <stop offset="1" stop-color="#0f172a" />
          </linearGradient>
        </defs>
        <rect x="260" y="-40" width="3" height="260" fill="url(#streak)" opacity="0.8" />
        <rect x="285" y="-60" width="2" height="280" fill="url(#streak)" opacity="0.6" />
        <rect x="310" y="-80" width="3" height="300" fill="url(#streak)" opacity="0.9" />
        <rect x="340" y="-30" width="2" height="260" fill="url(#streak)" opacity="0.7" />
        <circle cx="300" cy="60" r="30" fill="#020617" opacity="0.7" />
        <circle cx="305" cy="55" r="18" fill="#38bdf8" opacity="0.35" />
        <circle cx="305" cy="55" r="6" fill="#e5e7eb" opacity="0.9" />
      </svg>
    </section>

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <!-- Profil -->
      <section>
        <h2 class="sidebar-section-title" id="profil-title">PROFIL</h2>
        <p class="sidebar-text" id="profil-text">
          Samuel clarifie des situations complexes pour les traduire en plans de croissance lisibles et utiles pour les équipes.
          Il croise marketing, digital et psychologie cognitive pour aligner clients, opérations et direction sur les mêmes priorités.
        </p>
      </section>

      <!-- LinkedIn -->
      <section>
        <h2 class="sidebar-section-title" id="linkedin-title">LINKEDIN</h2>
        <a
          href="https://linkedin.com/in/samuelciscato"
          target="_blank"
          rel="noreferrer"
          class="linkedin-card"
          id="linkedin-card"
        >
          <div class="linkedin-thumb"></div>
          <div>
            <div class="linkedin-text-main" id="linkedin-main-text">Voir le profil LinkedIn</div>
            <div class="linkedin-text-sub" id="linkedin-sub-text">
              Recommandations et détail complet des expériences sur LinkedIn.
            </div>
          </div>
        </a>
      </section>

      <!-- Contact -->
      <section>
        <h2 class="sidebar-section-title" id="contact-title">CONTACT</h2>
        <p class="sidebar-contact">
          <span id="contact-email">samuel.ciscato@gmail.com</span><br />
          <span id="contact-phone">+33 6 67 98 00 44</span><br />
          <span id="contact-city">Lyon, France</span><br />
        </p>
      </section>

      <!-- CV -->
      <section>
        <h2 class="sidebar-section-title" id="cv-title">CV</h2>
        <div class="sidebar-card">
          <div class="cv-preview-box" id="cv-preview">
            <!-- miniature CV en background -->
          </div>
          <div class="sidebar-buttons">
            <a href="#" class="btn btn-primary" id="btn-download-cv">Télécharger le CV</a>
            <a href="#" class="btn btn-ghost" id="btn-open-cv">Ouvrir en grand format</a>
          </div>
        </div>
      </section>
    </aside>

    <!-- MAIN COLUMN -->
    <section class="main">
      <section class="qa-card">
        <div class="qa-header-row">
          <h3 class="qa-title" id="qa-title">Poser une question à mon dossier</h3>
          <p class="qa-caption" id="qa-caption">
            L’agent s’appuie uniquement sur les informations présentes dans le dossier.
            Si une information n’y apparaît pas, il indique simplement qu’il ne sait pas.
          </p>
        </div>

        <form id="qa-form" class="qa-form">
          <div class="qa-row">
            <textarea
              id="question-input"
              name="question"
              placeholder="Par exemple : Quels résultats concrets a-t-il obtenus chez Lyca ?"
            ></textarea>
            <button id="submit-btn" class="btn btn-primary qa-submit-btn" type="submit">
              Poser la question
            </button>
          </div>
          <div class="status-text" id="status-text"></div>
        </form>

        <div id="answer-box" class="answer-box answer-empty">
          Aucune question posée pour le moment. La première réponse apparaîtra ici.
        </div>

        <div id="followup-container" class="followup-container" style="display:none;">
          <span class="followup-label" id="followup-label">Questions possibles pour creuser :</span>
        </div>
      </section>
    </section>

    <!-- INFO CARD BOTTOM -->
    <section class="info-card">
      <h3 class="info-title" id="info-title">Comment fonctionne ce jumeau IA</h3>
      <p class="footer-note" id="footer-note"></p>
    </section>
  </main>

  <script>
    // Traductions FR / EN
    const translations = {
      fr: {
        roleLine: "DIRECTION MARKETING ET E COMMERCE · TRANSFORMATION DIGITALE",
        badgeText: "Samuel CV Twin",
        profilTitle: "PROFIL",
        profilText:
          "Samuel clarifie des situations complexes pour les traduire en plans de croissance lisibles et utiles pour les équipes. " +
          "Il croise marketing, digital et psychologie cognitive pour aligner clients, opérations et direction sur les mêmes priorités.",
        cvTitle: "CV",
        cvPreview: "",
        btnDownload: "Télécharger le CV",
        btnOpen: "Ouvrir en grand format",
        contactTitle: "CONTACT",
        linkedinTitle: "LINKEDIN",
        linkedinMain: "Voir le profil LinkedIn",
        linkedinSub: "Recommandations et détail complet des expériences sur LinkedIn.",
        langLabel: "Langue",
        heroEyebrow: "DOSSIER INTERACTIF",
        heroTitle: "Explorer mon parcours avant d’échanger en direct",
        heroSub:
          "Cet outil vous permet de poser des questions à un agent IA entraîné sur mon dossier " +
          "(CV, lettres, profil AssessFirst, questions/réponses). Il ne parle pas en mon nom : " +
          "il lit, recoupe et synthétise les informations disponibles, puis vous propose des pistes pour creuser.",
        qaTitle: "Poser une question à mon dossier",
        qaCaption:
          "L’agent s’appuie uniquement sur les informations présentes dans le dossier. " +
          "Si une information n’y apparaît pas, il indique simplement qu’il ne sait pas.",
        placeholder:
          "Par exemple : Quels résultats concrets a-t-il obtenus chez Lyca ? " +
          "Ou comment gère-t-il une équipe marketing sous pression ?",
        btnAsk: "Poser la question",
        answerEmpty: "Aucune question posée pour le moment. La première réponse apparaîtra ici.",
        followupLabel: "Questions possibles pour creuser :",
        infoTitle: "Comment fonctionne ce jumeau IA",
        footer:
          "<strong>Base de travail.</strong> Le jumeau IA s’appuie sur un pack de données fixe : plusieurs versions de mon CV, " +
          "des lettres de motivation, des réponses RH structurées et des éléments de profil de personnalité. " +
          "Le modèle lit ces documents, recoupe les informations et produit une synthèse adaptée à la question posée.<br /><br />" +
          "<strong>Technologie.</strong> L’agent tourne sur le modèle GPT-5.1 d’OpenAI, déployé via Netlify et piloté par des scénarios Make. " +
          "Il n’invente pas de dates ni de chiffres en dehors de ce qui figure dans le dossier et indique explicitement quand une information manque.<br /><br />" +
          "<strong>Données et confidentialité.</strong> Les questions que vous posez peuvent être enregistrées pour analyser les thèmes les plus fréquents " +
          "et améliorer le dispositif. Elles ne sont ni revendues, ni utilisées pour de la publicité ciblée. " +
          "Le jumeau IA ne crée pas d’informations nouvelles sur ma vie privée et ne porte pas de jugement sur le fit culturel. " +
          "Pour cela, un échange direct reste indispensable.",
        loading: "En réflexion...",
        emptyQuestion: "Merci de saisir une question avant d’envoyer.",
        genericError: "Une erreur est survenue. Vous pouvez réessayer dans un instant.",
        quickExamples: [
          {
            label: "Expérience marketing",
            question: "Pouvez-vous résumer son expérience en marketing et e-commerce ?"
          },
          {
            label: "Management d’équipe",
            question: "Comment dirige-t-il une équipe marketing et digitale dans un contexte de pression ?"
          },
          {
            label: "IA et automatisation",
            question: "Comment utilise-t-il concrètement l’IA et l’automatisation dans ses missions ?"
          }
        ]
      },
      en: {
        roleLine: "MARKETING AND E COMMERCE LEADERSHIP · DIGITAL TRANSFORMATION",
        badgeText: "Samuel CV Twin",
        profilTitle: "PROFILE",
        profilText:
          "Samuel turns complex situations into clear growth plans that are useful and sustainable for teams. " +
          "He combines marketing, digital and cognitive psychology to align customers, operations and leadership on the same priorities.",
        cvTitle: "CV",
        cvPreview: "",
        btnDownload: "Download CV",
        btnOpen: "Open full version",
        contactTitle: "CONTACT",
        linkedinTitle: "LINKEDIN",
        linkedinMain: "View LinkedIn profile",
        linkedinSub: "Recommendations and full experience details on LinkedIn.",
        langLabel: "Language",
        heroEyebrow: "INTERACTIVE DOSSIER",
        heroTitle: "Explore my track record before a live conversation",
        heroSub:
          "This tool lets you ask questions to an AI agent trained on my dossier " +
          "(CV, letters, AssessFirst profile, Q&A blocks). It does not speak in my name: " +
          "it reads, cross-checks and synthesises the available information, then suggests angles you can dig into.",
        qaTitle: "Ask a question to my dossier",
        qaCaption:
          "The agent only relies on what is present in the dossier. " +
          "If a piece of information is not there, it simply says it does not know.",
        placeholder:
          "For example: What concrete results did he deliver at Lyca? " +
          "Or how does he handle a marketing team under pressure?",
        btnAsk: "Ask the question",
        answerEmpty: "No question asked yet. The first answer will appear here.",
        followupLabel: "Follow-up questions you could ask:",
        infoTitle: "How this AI twin works",
        footer:
          "<strong>Data set.</strong> The AI twin is based on a fixed pack of documents: several versions of my CV, " +
          "cover letters, structured HR Q&A and personality insights. The model reads these documents, " +
          "cross-checks the information and produces a synthesis tailored to the question.<br /><br />" +
          "<strong>Technology.</strong> The agent runs on OpenAI’s GPT-5.1 model, deployed on Netlify and orchestrated with Make scenarios. " +
          "It does not invent dates or figures beyond what is present in the dossier and clearly says when a piece of information is missing.<br /><br />" +
          "<strong>Data and privacy.</strong> Questions may be logged to analyse recurring themes and improve the system. " +
          "They are not sold or used for targeted advertising. The AI twin does not create new information about my private life " +
          "and does not judge cultural fit. For that, a direct conversation is still required.",
        loading: "Thinking...",
        emptyQuestion: "Please type a question before sending.",
        genericError: "Something went wrong. You can try again in a moment.",
        quickExamples: [
          {
            label: "Marketing track record",
            question: "Could you summarise his experience in marketing and e-commerce?"
          },
          {
            label: "Team leadership",
            question: "How does he lead a marketing and digital team in a high-pressure context?"
          },
          {
            label: "AI and automation",
            question: "How does he use AI and automation in his recent projects?"
          }
        ]
      }
    };

    const elements = {
      roleLine: document.getElementById("role-line"),
      badgeText: document.getElementById("badge-text"),
      profilTitle: document.getElementById("profil-title"),
      profilText: document.getElementById("profil-text"),
      cvTitle: document.getElementById("cv-title"),
      cvPreview: document.getElementById("cv-preview"),
      btnDownload: document.getElementById("btn-download-cv"),
      btnOpen: document.getElementById("btn-open-cv"),
      contactTitle: document.getElementById("contact-title"),
      linkedinTitle: document.getElementById("linkedin-title"),
      linkedinMain: document.getElementById("linkedin-main-text"),
      linkedinSub: document.getElementById("linkedin-sub-text"),
      langLabel: document.getElementById("lang-label"),
      heroEyebrow: document.getElementById("hero-eyebrow"),
      heroTitle: document.getElementById("hero-title"),
      heroSub: document.getElementById("hero-sub"),
      qaTitle: document.getElementById("qa-title"),
      qaCaption: document.getElementById("qa-caption"),
      questionInput: document.getElementById("question-input"),
      submitBtn: document.getElementById("submit-btn"),
      answerBox: document.getElementById("answer-box"),
      followupLabel: document.getElementById("followup-label"),
      infoTitle: document.getElementById("info-title"),
      footerNote: document.getElementById("footer-note")
    };

    const statusText = document.getElementById("status-text");
    const followupContainer = document.getElementById("followup-container");
    const quickContainer = document.getElementById("hero-quick-questions");

    const langButtons = {
      fr: document.getElementById("btn-lang-fr"),
      en: document.getElementById("btn-lang-en")
    };

    let currentLang = "fr";

    function renderQuickExamples(lang) {
      const t = translations[lang];
      if (!t || !Array.isArray(t.quickExamples)) return;

      quickContainer.innerHTML = "";
      t.quickExamples.forEach((item) => {
        if (!item || typeof item.label !== "string" || typeof item.question !== "string") return;
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "hero-quick-btn";
        btn.textContent = item.label;
        btn.addEventListener("click", () => {
          elements.questionInput.value = item.question;
          document.getElementById("qa-form").dispatchEvent(new Event("submit", { cancelable: true }));
        });
        quickContainer.appendChild(btn);
      });
    }

    function applyLang(lang) {
      const t = translations[lang];
      if (!t) return;

      currentLang = lang;
      localStorage.setItem("cv_twin_lang", lang);

      elements.roleLine.textContent = t.roleLine;
      elements.badgeText.textContent = t.badgeText;
      elements.profilTitle.textContent = t.profilTitle;
      elements.profilText.textContent = t.profilText;
      elements.cvTitle.textContent = t.cvTitle;
      elements.cvPreview.innerHTML = t.cvPreview;
      elements.btnDownload.textContent = t.btnDownload;
      elements.btnOpen.textContent = t.btnOpen;
      elements.contactTitle.textContent = t.contactTitle;
      elements.linkedinTitle.textContent = t.linkedinTitle;
      elements.linkedinMain.textContent = t.linkedinMain;
      elements.linkedinSub.textContent = t.linkedinSub;
      elements.langLabel.textContent = t.langLabel;
      elements.heroEyebrow.textContent = t.heroEyebrow;
      elements.heroTitle.textContent = t.heroTitle;
      elements.heroSub.textContent = t.heroSub;
      elements.qaTitle.textContent = t.qaTitle;
      elements.qaCaption.textContent = t.qaCaption;
      elements.questionInput.placeholder = t.placeholder;
      elements.submitBtn.textContent = t.btnAsk;
      elements.answerBox.textContent = t.answerEmpty;
      elements.answerBox.classList.add("answer-empty");
      elements.followupLabel.textContent = t.followupLabel;
      elements.infoTitle.textContent = t.infoTitle;
      elements.footerNote.innerHTML = t.footer;

      Object.keys(langButtons).forEach(code => {
        langButtons[code].classList.toggle("active", code === lang);
      });

      statusText.textContent = "";
      clearFollowups();
      renderQuickExamples(lang);
    }

    function initLang() {
      const stored = localStorage.getItem("cv_twin_lang");
      if (stored && translations[stored]) {
        applyLang(stored);
      } else {
        const navLang = (navigator.language || "en").toLowerCase();
        const defaultLang = navLang.startsWith("fr") ? "fr" : "en";
        applyLang(defaultLang);
      }
    }

    Object.keys(langButtons).forEach(code => {
      langButtons[code].addEventListener("click", () => applyLang(code));
    });

    // Geo function: Lyon vs Paris
    async function initCity() {
      try {
        const res = await fetch("/.netlify/functions/geo");
        if (!res.ok) return;
        const data = await res.json();
        const city = (data.city || "").toLowerCase();
        const contactCity = document.getElementById("contact-city");
        if (!contactCity) return;

        if (city.includes("lyon")) {
          contactCity.textContent = "Lyon, France";
        } else {
          contactCity.textContent = "Paris, France";
        }
      } catch (e) {
        // fallback
      }
    }

    // Chat logic
    const form = document.getElementById("qa-form");

    function setLoading(isLoading) {
      const t = translations[currentLang];
      if (isLoading) {
        statusText.textContent = t.loading;
        elements.submitBtn.disabled = true;
        elements.submitBtn.textContent = t.loading;
      } else {
        statusText.textContent = "";
        elements.submitBtn.disabled = false;
        elements.submitBtn.textContent = t.btnAsk;
      }
    }

    function renderAnswer(text) {
      elements.answerBox.classList.remove("answer-empty");
      elements.answerBox.textContent = text;
    }

    function clearFollowups() {
      followupContainer.style.display = "none";
      followupContainer.querySelectorAll(".followup-btn").forEach((btn) => btn.remove());
    }

    function parseSuggestions(rawText) {
      const match = rawText.match(/QUESTIONS_SUIVANTES:\s*(\[.*\])\s*$/m);
      if (!match) return { mainAnswer: rawText.trim(), suggestions: [] };

      let suggestions = [];
      try {
        suggestions = JSON.parse(match[1]);
      } catch (e) {
        console.error("Impossible de parser QUESTIONS_SUIVANTES", e);
      }

      const mainAnswer = rawText.replace(match[0], "").trim();
      return { mainAnswer, suggestions };
    }

    function renderFollowups(suggestions) {
      clearFollowups();
      if (!Array.isArray(suggestions) || suggestions.length === 0) return;

      followupContainer.style.display = "flex";

      suggestions.slice(0, 3).forEach((q) => {
        if (!q || typeof q !== "string") return;

        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "followup-btn";

        const label =
          q.length > 80
            ? q.slice(0, 77).trimEnd() + "..."
            : q;

        btn.textContent = label;
        btn.title = q;

        btn.addEventListener("click", () => {
          elements.questionInput.value = q;
          form.dispatchEvent(new Event("submit", { cancelable: true }));
        });

        followupContainer.appendChild(btn);
      });
    }

    form.addEventListener("submit", async (event) => {
      event.preventDefault();
      const t = translations[currentLang];
      const question = elements.questionInput.value.trim();
      if (!question) {
        statusText.textContent = t.emptyQuestion;
        return;
      }

      setLoading(true);
      clearFollowups();

      try {
        const response = await fetch("/.netlify/functions/chat", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ question })
        });

        const data = await response.json();
        if (data && typeof data.answer === "string") {
          const { mainAnswer, suggestions } = parseSuggestions(data.answer);
          renderAnswer(mainAnswer);
          renderFollowups(suggestions);
        } else {
          renderAnswer(t.genericError);
        }
      } catch (error) {
        console.error(error);
        renderAnswer(translations[currentLang].genericError);
      } finally {
        setLoading(false);
      }
    });

    initLang();
    initCity();
  </script>
</body>
</html>
